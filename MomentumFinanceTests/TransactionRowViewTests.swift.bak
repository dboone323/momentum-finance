@testable import MomentumFinance
import XCTest

class TransactionRowViewTests: XCTestCase {
    var transaction: FinancialTransaction!
    var viewModel: Features.Transactions.TransactionRowViewModel!

    override func setUp() {
        super.setUp()

        // Create a sample financial transaction for testing
        let sampleDate = Date(timeIntervalSince1970: 1_633_072_800)
        let sampleAmount = FinancialCurrency(amount: 100.50, currencyCode: "USD")
        let sampleCategory = Category(name: "Groceries", color: .green)

        transaction = FinancialTransaction(
            id: UUID(),
            title: "Grocery Purchase",
            amount: sampleAmount,
            category: sampleCategory,
            date: sampleDate
        )
    }

    override func tearDown() {
        super.tearDown()

        // Clean up any resources created during the test
    }

    func testTransactionRowView() {
        // GIVEN a FinancialTransaction instance and a TransactionRowViewModel
        viewModel = Features.Transactions.TransactionRowViewModel(transaction: transaction)

        // WHEN the view is rendered
        let view = viewModel.view()

        // THEN the view should display the correct transaction details
        XCTAssertEqual(view.title, "Grocery Purchase")
        XCTAssertEqual(view.amount.formattedAmount, "$100.50")
        XCTAssertEqual(view.category.name, "Groceries")
        XCTAssertEqual(view.category.color, .green)
        XCTAssertEqual(view.date.formattedDate, "Aug 19, 2021")
    }
}
