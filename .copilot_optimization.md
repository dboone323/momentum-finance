# GitHub Copilot Optimization Guidelines
# Enhanced Learning and Adaptation Framework

## Core Learning Principle
**Never repeat the same mistake twice.** When an error occurs, immediately analyze the root cause and implement a permanent fix.

## Terminal Management Rules (CRITICAL)

### Background Process Handling
1. **NEVER run interactive commands in the same terminal as background services**
   - Background services (servers, daemons) must run with `nohup` or dedicated terminals
   - Interactive commands (curl, testing) must use separate terminal sessions
   - Always verify process isolation before running commands

2. **Server Startup Protocol**
   - Use `nohup command > logfile 2>&1 &` for persistent background services
   - Verify server is running with `ps aux | grep process_name` before testing
   - Use separate terminals for server management vs. client interactions

3. **Process Validation Steps**
   - Check if target port/process is already running before starting new instances
   - Use `lsof -i :port` to check port usage
   - Kill conflicting processes with `lsof -ti:port | xargs kill -9` when necessary

### Error Recovery Patterns
1. **Immediate Error Analysis**: When a command fails, identify if it's due to:
   - Terminal interference (most common)
   - Missing dependencies
   - Incorrect paths
   - Permission issues

2. **Pattern Recognition**: Common mistake patterns to avoid:
   - Running curl/test commands in server terminal (causes ^C shutdown)
   - Not using background flags for long-running processes
   - Assuming processes are running without verification

## Enhanced Validation Framework

### Pre-Command Checklist
- [ ] Is this a background service? (Use nohup if yes)
- [ ] Will this command interrupt other processes? (Use separate terminal if yes)
- [ ] Have I verified the target service is running? (Check with ps/curl if needed)
- [ ] Am I using the correct working directory? (cd to proper location)

### Post-Command Validation
- [ ] Did the command complete successfully? (Check exit codes)
- [ ] Did it produce expected output? (Validate results)
- [ ] Did it affect other running processes? (Check process status)
- [ ] Should I clean up any temporary processes? (Kill if necessary)

## Learning Adaptation Rules

1. **Mistake Documentation**: Every error gets documented with:
   - What went wrong
   - Root cause analysis
   - Prevention measures implemented
   - Updated patterns/rules

2. **Pattern Updates**: After each mistake, update operational guidelines to prevent recurrence

3. **Proactive Prevention**: Implement checks that prevent common mistakes before they happen

## Tool Usage Optimization

### Terminal Tool Best Practices
- Use `isBackground: true` for services that need to run continuously
- Use `isBackground: false` for quick commands and tests
- Always check terminal output for interruption signals (^C)
- Use separate terminal calls for server vs. client operations

### Pre-Command Validation (INTELLIGENT)
**MANDATORY**: Before running any terminal command, use the validation script:

```bash
# Validate before running commands
./Tools/Automation/validate_command.sh "your command here" true/false

# Examples:
./Tools/Automation/validate_command.sh "curl http://localhost:5005/status" false  # ✅ SAFE
./Tools/Automation/validate_command.sh "curl http://api.example.com" false       # ⚠️ FLAGGED
./Tools/Automation/validate_command.sh "python3 setup.py install" false          # ⚠️ NEEDS WD
./Tools/Automation/validate_command.sh "python3 mcp_server.py" true             # ✅ SERVER
```

**Smart Detection Features:**
- **Safe Operations**: Recognizes status checks to known local services (no interference warning)
- **Risk Assessment**: Flags external API calls that might interfere with background services
- **Context Awareness**: Only requires working directory for commands that actually need it
- **Service Validation**: Checks for port conflicts before starting servers

### Process Management Commands
```bash
# Start background service (VALIDATED APPROACH)
./Tools/Automation/validate_command.sh "python3 mcp_server.py" true && \
nohup python3 mcp_server.py > mcp_server.log 2>&1 &

# Check if running
ps aux | grep process_name

# Kill specific process
kill -9 PID

# Check port usage
lsof -i :port
```

## Continuous Improvement

### Self-Monitoring
- Track command success rates
- Monitor for repeated error patterns
- Update guidelines based on new mistake types
- Implement automated validation where possible

### Adaptation Metrics
- Commands completed without interruption: TARGET 100%
- Background services staying alive: TARGET 100%
- Error recovery time: TARGET < 30 seconds
- Pattern violation detection: TARGET 100%</content>
<parameter name="filePath">/Users/danielstevens/Desktop/Quantum-workspace/.copilot_optimization.md